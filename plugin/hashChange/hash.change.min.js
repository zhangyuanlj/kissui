!function(a){function d(){var c=location.hash;c!=b&&(b=c,a.event.trigger("hashchange"))}function e(){var d=c.contentDocument||c.contentWindow.document,e=d.location.hash;""==e&&(e="#"),e!=b&&(location.hash!=e&&(location.hash=e),b=e,a.event.trigger("hashchange"))}function f(a){"#"==a&&(a="");var b=c.contentWindow.document;b.open(),b.close(),b.location.hash!=a&&(b.location.hash=a)}var b,c;return a.fn.extend({hashchange:function(a){this.bind("hashchange",a),location.hash&&a()},openOnClick:function(b){return(void 0===b||0==b.length)&&(b="#"),this.click(function(c){return b&&"#"==b.charAt(0)?window.setTimeout(function(){a.locationHash(b)},0):window.location(b),c.stopPropagation(),!1})}}),a.browser.msie&&document.documentMode&&document.documentMode>=8?(a.extend({locationHash:function(a){return a?(a?"#"!=a.charAt(0)&&(a="#"+a):a="#",location.hash=a,void 0):"#"==location.hash.charAt(0)?location.hash.substr(1,location.hash.length-1):location.hash}}),void 0):(a.extend({locationHash:function(c){return c?(void 0!==b&&(c?"#"!=c.charAt(0)&&(c="#"+c):c="#",location.hash=c,b!=c&&(b=c,a.browser.msie&&f(c),a.event.trigger("hashchange"))),void 0):"#"==location.hash.charAt(0)?location.hash.substr(1,location.hash.length-1):location.hash}}),a(document).ready(function(){b=location.hash,a.browser.msie?(""==b&&(b="#"),c=a("<iframe />").hide().get(0),a("body").prepend(c),f(location.hash),setInterval(e,100)):setInterval(d,100)}),a(window).unload(function(){c=null}),a.browser.msie&&a("a[href^=#]").live("click",function(){var b=a(this).attr("href");return 0==a(b).length&&0==a("a[name="+b.slice(1)+"]").length?(a.locationHash(b),!1):void 0}),void 0)}(jQuery);