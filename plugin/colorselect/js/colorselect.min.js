(function(a){a.fn.colorSelect=function(g){if(this.length<1){return}g=a.extend({color:"#000000",title:null},g);var d=this;if(d.val().length>0){g.color=d.val()}var o,q,r;o=a("<div></div>",{"class":"html_colorpane"}).appendTo("body");var t=["00","33","66","99","cc","ff"];var c=["ff0000","00ff00","0000ff","ffff00","00ffff","ff00ff"];r="<h5>清除颜色</h5><table>";for(var p=0;p<2;p++){for(var n=0;n<6;n++){r+="<tr>";r+="<td title='#000000' style='background-color:#000000'>";if(p==0){r+="<td title='#"+t[n]+t[n]+t[n]+"' style='background-color:#"+t[n]+t[n]+t[n]+"'>"}else{r+="<td title='#"+c[n]+"' style='background-color:#"+c[n]+"'>"}r+="<td title='#000000' style='background-color:#000000'>";for(var h=0;h<3;h++){for(var f=0;f<6;f++){r+="<td title='#"+t[h+p*3]+t[f]+t[n]+"' style='background-color:#"+t[h+p*3]+t[f]+t[n]+"'>"}}}}r+="</table>";o.html(r);q=a("<div></div>").css({display:"none",position:"absolute",top:"0",left:"0",background:"#fff",opacity:"0","z-index":"999"}).appendTo("body");var s=function(i){d.val(i).css("backgroundColor",i);if(g.title!=null){a(g.title).css("color",i)}};var b=function(){o.hide();q.hide()};var e,m;e=o.find("h5");m=o.find("table");m.delegate("td","click",function(){var i=this.title;s(i);b()});d.bind("click",function(){var w=document.body.clientWidth;var j=document.body.clientHeight;var u=o.outerWidth();var x=o.outerHeight();var k=d.offset().top;var l=d.offset().left;var v=d.outerWidth();var i=d.outerHeight();k=((k+x+i)>j)?k-x:k+i;l=((l+u)>w)?l-(u-v):l;o.css({top:k,left:l}).show();q.css({width:w,height:j}).show()});e.bind("click",function(){s(g.color);b()});q.bind("click",function(){b()});s(g.color)}})(jQuery);
