var touch=touch||{};!function(a,b){"use strict";function p(a){var b,c,d,e;if(n){for(b=[],c=null,d=0,e=a.touches.length;e>d;d++)c=a.touches[d],b.push({x:c.pageX,y:c.pageY});return b}return[{x:a.pageX,y:a.pageY}]}function q(a,b){var c=b.x-a.x,d=b.y-a.y;return Math.sqrt(c*c+d*d)}function r(a){return a.touches?a.touches.length:1}function s(a,b){var c,d;return a.length>=2&&b.length>=2?(c=q(a[1],a[0]),d=q(b[1],b[0]),d/c):1}function t(a,b){return 180*Math.atan2(b.y-a.y,b.x-a.x)/Math.PI}function u(a,b){var c=Math.atan(-1*(b.y-a.y)/(b.x-a.x))*(180/Math.PI);return 0>c?c+180:c}function v(a){var c,b={up:-45>a&&a>-135,down:a>=45&&135>a,left:a>=135||-135>=a,right:a>=-45&&45>=a};for(c in b)if(b[c])return c;return null}function x(a){for(var b=0,c=0;a.offsetParent;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return{left:b,top:c}}function y(){F=G=H=null,O=M=I=J=!1,K=!1,C={},S=!1}function A(a){return"touchmove"===a.type||"mousemove"===a.type}function B(a){return"touchend"===a.type||"mouseup"===a.type||"touchcancel"===a.type}function bb(){var b=n?"touchstart touchmove touchend touchcancel":"mouseup mousedown mousemove mouseout";$(a,b,Z)}var c=function(){var a=window.navigator,b=a.userAgent,c=b.match(/(Android)[\s\/]+([\d\.]+)/),d=b.match(/(iPad|iPhone|iPod)\s+OS\s([\d_\.]+)/),e=b.match(/(Windows\s+Phone)\s([\d\.]+)/),f=/WebKit\/[\d.]+/i.test(b),g=d?a.standalone?f:/Safari/i.test(b)&&!/CriOS/i.test(b)&&!/MQQBrowser/i.test(b):!1,h={};return c&&(h.android=!0,h.version=c[2]),d&&(h.ios=!0,h.version=d[2].replace(/_/g,"."),h.ios7=/^7/.test(h.version),"iPad"===d[1]?h.ipad=!0:"iPhone"===d[1]?(h.iphone=!0,h.iphone5=568==screen.height):"iPod"===d[1]&&(h.ipod=!0)),e&&(h.wp=!0,h.version=e[2],h.wp8=/^8/.test(h.version)),f&&(h.webkit=!0),g&&(h.safari=!0),h}(),d={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",touchcancel:"mouseout"},e={getType:function(a){return Object.prototype.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},getSelector:function(a){if(a.id)return"#"+a.id;if(a.className){var b=a.className.split(/\s+/);return"."+b.join(".")}return a.tagName.toLowerCase()},matchSelector:function(a,b){return a.webkitMatchesSelector(b)},getEventListeners:function(a){return a.listeners},getPCevts:function(a){return d[a]||a},forceReflow:function(){var b,c,a=document.getElementById("domTreeOp");a||(a=document.createElement("div"),a.id="domTreeOp",document.body.appendChild(a)),b=a.parentNode,c=a.nextSibling,b.removeChild(a),b.insertBefore(a,c)},simpleClone:function(a){return JSON.parse(JSON.stringify(a))}},f=0,g=[],h=function(a,b,c){c=c||{};var d,e={bubbles:!0,cancelable:!0,detail:c};"undefined"!=typeof CustomEvent?(d=new CustomEvent(b,e),a&&a.dispatchEvent(d)):(d=document.createEvent("CustomEvent"),d.initCustomEvent(b,!0,!0,c),a&&a.dispatchEvent(d))},i=function(a,b,d){a.listeners=a.listeners||{},a.listeners[b]?a.listeners[b].push(d):a.listeners[b]=[d];var h=function(a){c.ios7&&e.forceReflow(),a.originEvent=a,a.startRotate=function(){S=!0};for(var b in a.detail)"type"!==b&&(a[b]=a.detail[b]);d.call(a.target,a)};d.proxy=d.proxy||{},d.proxy[b]?d.proxy[b].push(f++):d.proxy[b]=[f++],g.push(h),a.addEventListener&&a.addEventListener(b,h,!1)},j=function(a,b,c){var d,e;c?(e=c.proxy[b],e&&e.length&&e.forEach(function(c){a.removeEventListener&&a.removeEventListener(b,g[c],!1)})):(d=a.listeners[b],d&&d.length&&d.forEach(function(c){a.removeEventListener(b,c,!1)}))},k=function(a,b,d,h){var i=function(b){var f,g,i,j,k;b.originEvent=b,b.startRotate=function(){S=!0};for(g in b.detail)"type"!==g&&(b[g]=b.detail[g]);if(i=e.getSelector(a)+" "+d,j=e.matchSelector(b.target,i),k=e.matchSelector(b.target,i+" "+b.target.nodeName),!j&&k){for(c.ios7&&e.forceReflow(),f=b.target;!e.matchSelector(f,i);)f=f.parentNode;h.call(f,b)}else c.ios7&&e.forceReflow(),(j||k)&&h.call(b.target,b)};h.proxy=h.proxy||{},h.proxy[b]?h.proxy[b].push(f++):h.proxy[b]=[f++],g.push(i),a.listeners=a.listeners||{},a.listeners[b]?a.listeners[b].push(i):a.listeners[b]=[i],a.addEventListener&&a.addEventListener(b,i,!1)},l=function(a,b,c,d){var e,f;d?(f=d.proxy[b],f.length&&f.forEach(function(c){a.removeEventListener&&a.removeEventListener(b,g[c],!1)})):(e=a.listeners[b],e.forEach(function(c){a.removeEventListener(b,c,!1)}))},m={tap:!0,doubleTap:!0,tapMaxDistance:10,hold:!0,holdTime:650,maxDoubleTapInterval:300,swipe:!0,swipeTime:300,swipeMinDistance:18,swipeFactor:5,drag:!0,pinch:!0,minScaleRate:0,minRotationAngle:0},n="ontouchstart"in window,o={TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup",CLICK:"click",PINCH_START:"pinchstart",PINCH_END:"pinchend",PINCH:"pinch",PINCH_IN:"pinchin",PINCH_OUT:"pinchout",ROTATION_LEFT:"rotateleft",ROTATION_RIGHT:"rotateright",ROTATION:"rotate",SWIPE_START:"swipestart",SWIPING:"swiping",SWIPE_END:"swipeend",SWIPE_LEFT:"swipeleft",SWIPE_RIGHT:"swiperight",SWIPE_UP:"swipeup",SWIPE_DOWN:"swipedown",SWIPE:"swipe",DRAG:"drag",DRAGSTART:"dragstart",DRAGEND:"dragend",HOLD:"hold",TAP:"tap",DOUBLE_TAP:"doubletap"},C={start:null,move:null,end:null},D=0,F=null,G=null,H=null,I=!1,J=!1,K=!1,L={},M=!1,N=null,O=!1,Q=null,R=1,S=!1,T=[],U=0,V=0,W=0,X=null,Y={_getAngleDiff:function(a){for(var b=parseInt(U-u(a[0],a[1]),10),c=0;Math.abs(b-V)>90&&c++<50;)0>V?b-=180:b+=180;return V=parseInt(b,10)},pinch:function(a){var c,d,f,g,i,k,j,b=a.target;if(m.pinch){if(!M)return;if(r(a)<2&&!B(a))return;c=s(C.start,C.move),d=this._getAngleDiff(C.move),f={type:"",originEvent:a,scale:c,rotation:d,direction:d>0?"right":"left",fingersCount:r(a)},J?A(a)?(f.fingerStatus="move",h(b,o.PINCH,f)):B(a)&&(f.fingerStatus="end",h(b,o.PINCH_END,f),y()):(J=!0,f.fingerStatus="start",h(b,o.PINCH_START,f)),Math.abs(1-c)>m.minScaleRate&&(g=e.simpleClone(f),i=1e-11,c>R?(R=c-i,h(b,o.PINCH_OUT,g,!1)):R>c&&(R=c+i,h(b,o.PINCH_IN,g,!1)),B(a)&&(R=1)),Math.abs(d)>m.minRotationAngle&&(j=e.simpleClone(f),k=d>0?o.ROTATION_RIGHT:o.ROTATION_LEFT,h(b,k,j,!1),h(b,o.ROTATION,f))}},rotateSingleFinger:function(a){var c,d,e,f,g,b=a.target;if(S&&r(a)<2){if(!C.move)return;T.length<2&&(c=x(b),T=[{x:c.left+b.offsetWidth/2,y:c.top+b.offsetHeight/2},C.move[0]],U=parseInt(u(T[0],T[1]),10)),d=[T[0],C.move[0]],e=this._getAngleDiff(d),f={type:"",originEvent:a,rotation:e,direction:e>0?"right":"left",fingersCount:r(a)},A(a)?f.fingerStatus="move":(B(a)||"mouseout"===a.type)&&(f.fingerStatus="end",h(b,o.PINCH_END,f),y()),g=e>0?o.ROTATION_RIGHT:o.ROTATION_LEFT,h(b,g,f),h(b,o.ROTATION,f)}},swipe:function(a){var c,d,e,f,g,i,j,k,l,n,b=a.target;!M||!C.move||r(a)>1||(c=Date.now(),d=c-D,e=q(C.start[0],C.move[0]),f={x:C.move[0].x-L.left,y:C.move[0].y-L.top},g=t(C.start[0],C.move[0]),i=v(g),j=d/1e3,k=10*(10-m.swipeFactor)*j*j,l={type:o.SWIPE,originEvent:a,position:f,direction:i,distance:e,distanceX:C.move[0].x-C.start[0].x,distanceY:C.move[0].y-C.start[0].y,x:C.move[0].x-C.start[0].x,y:C.move[0].y-C.start[0].y,angle:g,duration:d,fingersCount:r(a),factor:k},m.swipe&&(n=function(){var a=o;switch(i){case"up":h(b,a.SWIPE_UP,l);break;case"down":h(b,a.SWIPE_DOWN,l);break;case"left":h(b,a.SWIPE_LEFT,l);break;case"right":h(b,a.SWIPE_RIGHT,l)}},I?A(a)?(l.fingerStatus=l.swipe="move",h(b,o.SWIPING,l),d>m.swipeTime&&d<m.swipeTime+50&&e>m.swipeMinDistance&&(n(),h(b,o.SWIPE,l,!1))):(B(a)||"mouseout"===a.type)&&(l.fingerStatus=l.swipe="end",h(b,o.SWIPE_END,l),m.swipeTime>d&&e>m.swipeMinDistance&&(n(),h(b,o.SWIPE,l,!1))):(l.fingerStatus=l.swipe="start",I=!0,h(b,o.SWIPE_START,l))),m.drag&&(K?A(a)?(l.fingerStatus=l.swipe="move",h(b,o.DRAG,l)):B(a)&&(l.fingerStatus=l.swipe="end",h(b,o.DRAGEND,l)):(l.fingerStatus=l.swipe="start",K=!0,h(b,o.DRAGSTART,l))))},tap:function(a){var c,d,e,f,b=a.target;if(m.tap){if(c=Date.now(),d=c-D,e=q(C.start[0],C.move?C.move[0]:C.start[0]),clearTimeout(N),f=function(){if(X&&m.doubleTap&&D-W<m.maxDoubleTapInterval){var a=q(X,C.start[0]);if(16>a)return!0}return!1}())return clearTimeout(Q),h(b,o.DOUBLE_TAP,{type:o.DOUBLE_TAP,originEvent:a,position:C.start[0]}),void 0;if(m.tapMaxDistance<e)return;m.holdTime>d&&r(a)<=1&&(O=!0,W=c,X=C.start[0],Q=setTimeout(function(){h(b,o.TAP,{type:o.TAP,originEvent:a,fingersCount:r(a),position:X})},220))}},hold:function(a){var b=a.target;m.hold&&(clearTimeout(N),N=setTimeout(function(){if(C.start){var c=q(C.start[0],C.move?C.move[0]:C.start[0]);m.tapMaxDistance<c||O||h(b,"hold",{type:"hold",originEvent:a,fingersCount:r(a),position:C.start[0]})}},m.holdTime))}},Z=function(a){var c,d,b=a.target;switch(a.type){case"touchstart":case"mousedown":T=[],M=!0,(!C.start||C.start.length<2)&&(C.start=p(a)),r(a)>=2&&(U=parseInt(u(C.start[0],C.start[1]),10)),D=Date.now(),F=a,L={},c=b.getBoundingClientRect(),d=document.documentElement,L={top:c.top+(window.pageYOffset||d.scrollTop)-(d.clientTop||0),left:c.left+(window.pageXOffset||d.scrollLeft)-(d.clientLeft||0)},Y.hold(a);break;case"touchmove":case"mousemove":if(!M||!C.start)return;C.move=p(a),r(a)>=2?Y.pinch(a):S?Y.rotateSingleFinger(a):Y.swipe(a);break;case"touchend":case"touchcancel":case"mouseup":case"mouseout":if(!M)return;H=a,J?Y.pinch(a):S?Y.rotateSingleFinger(a):I?Y.swipe(a):Y.tap(a),y(),U=0,V=0,a.touches&&1===a.touches.length&&(M=!0,S=!0)}},$=function(){function j(a){n||(a=e.getPCevts(a)),h.forEach(function(b){k(b,a,f,d[a])})}function m(a){n||(a=e.getPCevts(a)),h.forEach(function(b){i(b,a,d[a])})}var b,c,d,f,h,l,o,p,g=arguments;if(g.length<2||g>4)return console.error("unexpected arguments!");if(h="string"===e.getType(g[0])?a.querySelectorAll(g[0]):g[0],h=h.length?Array.prototype.slice.call(h):[h],3===g.length&&"string"===e.getType(g[1]))return b=g[1].split(" "),c=g[2],b.forEach(function(a){n||(a=e.getPCevts(a)),h.forEach(function(b){i(b,a,c)})}),void 0;if(3!==g.length||"object"!==e.getType(g[1])){if(2!==g.length||"object"!==e.getType(g[1]))return 4===g.length&&"object"===e.getType(g[2])?(b=g[1].split(" "),c=g[3],b.forEach(function(a){n||(a=e.getPCevts(a)),h.forEach(function(b){i(b,a,c)})}),void 0):4===g.length?(p=h[0],b=g[1].split(" "),f=g[2],c=g[3],b.forEach(function(a){n||(a=e.getPCevts(a)),k(p,a,f,c)}),void 0):void 0;d=g[1];for(o in d)m(o)}else{d=g[1],f=g[2];for(l in d)j(l)}},_=function(){var b,c,f,g,d=arguments;return d.length<1||d.length>4?console.error("unexpected arguments!"):(f="string"===e.getType(d[0])?a.querySelectorAll(d[0]):d[0],f=f.length?Array.prototype.slice.call(f):[f],1===d.length||2===d.length?(f.forEach(function(a){b=d[1]?d[1].split(" "):Object.keys(a.listeners),b.length&&b.forEach(function(b){n||(b=e.getPCevts(b)),j(a,b),l(a,b)})}),void 0):3===d.length&&"function"===e.getType(d[2])?(c=d[2],f.forEach(function(a){b=d[1].split(" "),b.forEach(function(b){n||(b=e.getPCevts(b)),j(a,b,c)})}),void 0):3===d.length&&"string"===e.getType(d[2])?(g=d[2],f.forEach(function(a){b=d[1].split(" "),b.forEach(function(b){n||(b=e.getPCevts(b)),l(a,b,g)})}),void 0):4===d.length?(c=d[3],f.forEach(function(a){b=d[1].split(" "),b.forEach(function(b){n||(b=e.getPCevts(b)),l(a,b,g,c)})}),void 0):void 0)},ab=function(b,c,d){var g,f=arguments;n||(c=e.getPCevts(c)),g="string"===e.getType(f[0])?a.querySelectorAll(f[0]):f[0],g=g.length?Array.prototype.call(g):[g],g.forEach(function(a){h(a,c,d)})};bb(),b.on=$,b.off=_,b.bind=$,b.unbind=_,b.live=$,b.die=_,b.config=m,b.trigger=ab}(document,touch);